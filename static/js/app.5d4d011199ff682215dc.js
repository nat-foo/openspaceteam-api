webpackJsonp([1],{"+NSl":function(t,n){},"0F4k":function(t,n){},"4eHe":function(t,n){},"86W5":function(t,n){t.exports="data:image/png;base64,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"},BcG2:function(t,n){},CbWX:function(t,n){},D4uH:function(t,n,e){"use strict";var i=e("bOdI"),s=e.n(i),o={},a={name:"fa-icon",props:{name:{type:String,validator:function(t){return!t||t in o||(console.warn('Invalid prop: prop "name" is referring to an unregistered icon "'+t+'".\nPlease make sure you have imported this icon before using it.'),!1)}},scale:[Number,String],spin:Boolean,inverse:Boolean,pulse:Boolean,flip:{validator:function(t){return"horizontal"===t||"vertical"===t}},label:String},data:function(){return{x:!1,y:!1,childrenWidth:0,childrenHeight:0,outerScale:1}},computed:{normalizedScale:function(){var t=this.scale;return t=void 0===t?1:Number(t),isNaN(t)||t<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.',this),this.outerScale):t*this.outerScale},klass:function(){return s()({"fa-icon":!0,"fa-spin":this.spin,"fa-flip-horizontal":"horizontal"===this.flip,"fa-flip-vertical":"vertical"===this.flip,"fa-inverse":this.inverse,"fa-pulse":this.pulse},this.$options.name,!0)},icon:function(){return this.name?o[this.name]:null},box:function(){return this.icon?"0 0 "+this.icon.width+" "+this.icon.height:"0 0 "+this.width+" "+this.height},ratio:function(){if(!this.icon)return 1;var t=this.icon,n=t.width,e=t.height;return Math.max(n,e)/16},width:function(){return this.childrenWidth||this.icon&&this.icon.width/this.ratio*this.normalizedScale||0},height:function(){return this.childrenHeight||this.icon&&this.icon.height/this.ratio*this.normalizedScale||0},style:function(){return 1!==this.normalizedScale&&{fontSize:this.normalizedScale+"em"}},raw:function(){if(!this.icon||!this.icon.raw)return null;var t=this.icon.raw,n={};return t=t.replace(/\s(?:xml:)?id=(["']?)([^"')\s]+)\1/g,function(t,e,i){var s="fa-"+(r++).toString(16);return n[i]=s,' id="'+s+'"'}),t=t.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,function(t,e,i,s){var o=e||s;return o&&n[o]?"#"+n[o]:t}),t}},mounted:function(){var t=this;if(this.name||0!==this.$children.length){if(!this.icon){var n=0,e=0;this.$children.forEach(function(i){i.outerScale=t.normalizedScale,n=Math.max(n,i.width),e=Math.max(e,i.height)}),this.childrenWidth=n,this.childrenHeight=e,this.$children.forEach(function(t){t.x=(n-t.width)/2,t.y=(e-t.height)/2})}}else console.warn('Invalid prop: prop "name" is required.')},register:function(t){for(var n in t){var e=t[n];e.paths||(e.paths=[]),e.d&&e.paths.push({d:e.d}),e.polygons||(e.polygons=[]),e.points&&e.polygons.push({points:e.points}),o[n]=e}},icons:o},r=870711;var l={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("svg",{class:t.klass,style:t.style,attrs:{version:"1.1",role:t.label?"img":"presentation","aria-label":t.label,x:t.x,y:t.y,width:t.width,height:t.height,viewBox:t.box}},[t._t("default",function(){return[t.icon&&t.icon.paths?t._l(t.icon.paths,function(n,i){return e("path",t._b({key:"path-"+i},"path",n,!1))}):t._e(),t._v(" "),t.icon&&t.icon.polygons?t._l(t.icon.polygons,function(n,i){return e("polygon",t._b({key:"polygon-"+i},"polygon",n,!1))}):t._e(),t._v(" "),t.icon&&t.icon.raw?[e("g",{domProps:{innerHTML:t._s(t.raw)}})]:t._e()]})],2)},staticRenderFns:[]};var c=e("VU/8")(a,l,!1,function(t){e("jSVj")},null,null);n.a=c.exports},EGRX:function(t,n){},FheX:function(t,n){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAoCAYAAAD32nqhAAAA6UlEQVR42qXRv0dFARyG8UdERERERERERERENCQaoiEaGi4N0RANDZFOS1NLW6KlKdpaLg25crvOuel/aG2JpB/3nPM95PwNz/BZH14v1QmnBlXCsUF1xpFBnHNoEBccGMQl+wZxzZ5B3LBrELfsGMQdDYO4Z9sgmmwZxCObBtFmw6BMWTeIjDWDssuqQZmxYtSBZaOesGTULywaFBkLBsUL8wZFypxB3mXWIO8wY5CnTBv0ukwZ9DpMGvylTBj8PjFu8PPMmMF3xqjBV4sRg882wwYfTYYM3h8YNHhrMWDwekW/QZLQZ/wDD3HCHQF5BhMAAAAtdEVYdFNvZnR3YXJlAGJ5LmJsb29kZHkuY3J5cHRvLmltYWdlLlBORzI0RW5jb2RlcqgGf+4AAAAASUVORK5CYII="},NHnr:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("d7EF"),s=e.n(i),o=e("7+uW"),a=e("EaLy"),r=e("qTLt"),l=e.n(r),c=(e("D/PP"),e("/ocq")),u=e("NYxO");o.a.use(u.a);var d=new u.a.Store({state:{menuMusicInitialized:!1,audioContext:new AudioContext,socket:{connected:!1,connecting:!0},uid:-1,inGame:!1,gameGrid:null},getters:{menuMusicInitialized:function(t){return t.menuMusicInitialized},isConnecting:function(t){return t.socket.connecting},isConnected:function(t){return t.socket.connected},uid:function(t){return t.uid},audioContext:function(t){return t.audioContext},inGame:function(t){return t.inGame},gameGrid:function(t){return t.gameGrid}},mutations:{menuMusicInitialized:function(t){t.menuMusicInitialized=!0},connected:function(t,n){t.socket.connecting=!1,t.socket.connected=!0,t.uid=n,console.log(t.uid)},connectionFailed:function(t){t.socket.connecting=!1,t.socket.connected=!1},inGame:function(t,n){t.inGame=n},gameGrid:function(t,n){t.gameGrid=n}}}),h={render:function(){var t=this.$createElement,n=this._self._c||t;return n("div",{staticClass:"ship",style:{left:this.left,transition:"left "+this.transitionSpeed+"s"}},[n("img",{staticClass:"fire",attrs:{src:e("FheX")}}),this._v(" "),n("img",{staticClass:"body",attrs:{src:e("86W5")}})])},staticRenderFns:[]};var m=e("VU/8")({props:{left:{required:!0},transitionSpeed:{required:!1,default:1}}},h,!1,function(t){e("4eHe")},null,null).exports,p={render:function(){var t=this.$createElement,n=this._self._c||t;return n("div",{attrs:{id:"death-barrier"}},[n("img",{style:{width:this.position+10+"%"},attrs:{src:e("jgeE")}})])},staticRenderFns:[]};var f=e("VU/8")({props:{position:{required:!0}}},p,!1,function(t){e("W+LL")},null,null).exports,v=e("Ubyc"),g=e("Zrlr"),b=e.n(g),_=e("wxAW"),y=e.n(_),C=(function(){function t(n,e,i){b()(this,t),this.MORSE={A:".-",B:"-...",C:"-.-.",D:"-..",E:".",F:"..-.",G:"--.",H:"....",I:"..",J:".---",K:"-.-",L:".-..",M:"--",N:"-.",O:"---",P:".--.",Q:"--.-",R:".-.",S:"...",T:"-",U:"..-",V:"...-",W:".--",X:"-..-",Y:"-.--",Z:"--..",1:".----",2:"..---",3:"...--",4:"....-",5:".....",6:"-....",7:"--...",8:"---..",9:"----.",0:"-----"},this._oscillator=n.createOscillator(),this._gain=n.createGain(),this._gain.gain.value=0,this._oscillator.frequency.value=750,this._oscillator.connect(this._gain),void 0===e&&(e=20),this._dot=1.2/e,void 0===i&&(i=1),this._volume=i,this._oscillator.start(0)}y()(t,[{key:"connect",value:function(t){return this._gain.connect(t)}},{key:"playChar",value:function(t,n){for(var e=0;e<n.length;e++){switch(n[e]){case".":this._gain.gain.setValueAtTime(this._volume,t),t+=this._dot,this._gain.gain.setValueAtTime(0,t);break;case"-":this._gain.gain.setValueAtTime(this._volume,t),t+=3*this._dot,this._gain.gain.setValueAtTime(0,t)}t+=this._dot}return t}},{key:"playString",value:function(t,n){n=n.toUpperCase();for(var e=0;e<n.length;e++)" "===n[e]?t+=3*this._dot:void 0!==this.MORSE[n[e]]&&(t=this.playChar(t,this.MORSE[n[e]]),t+=2*this._dot);return t}}])}(),{data:function(){return{welcomeText:["SITUAZIONE CRITICA!\nATTENERSI AL SEGUENTE PROTOCOLLO:\n\n+ Ogni giocatore possiede dei comandi diversi;\n+ Ad ogni giocatore è assegnato un'istruzione;\n+ Comunicare l'istruzione ad alta voce;\n+ Chi possiede il comando relativo ad un'istruzione è pregato di eseguirla;\n+ Eseguire le istruzioni entro il tempo limite;\n","La collaborazione è fondamentale\nRicordati di lavorare come una squadra\nCome un vero Spaceteam.\n\nBuon divertimento!"]}},components:{VueTyper:v.VueTyper},mounted:function(){}}),w={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"welcome-text"}},[e("icon",{staticClass:"alert-icon",attrs:{name:"exclamation-triangle",scale:"4"}}),t._v(" "),e("div",{staticClass:"text"},[e("vue-typer",{staticClass:"space-font-mono",attrs:{text:t.welcomeText,repeat:0,"type-delay":45,eraseOnComplete:!0},on:{completed:function(n){return t.$emit("completed")}}})],1)],1)},staticRenderFns:[]};var S=e("VU/8")(C,w,!1,function(t){e("WsOO")},null,null).exports,A=e("GDE4"),k=e.n(A),x=e("bOdI"),I=e.n(x),$={name:"switches",props:{typeBold:{default:!1},value:{default:!1},disabled:{default:!1},label:{default:""},textEnabled:{default:""},textDisabled:{default:""},color:{default:"default"},theme:{default:"default"},emitOnMount:{default:!0}},mounted:function(){this.emitOnMount&&this.$emit("input",this.value)},methods:{trigger:function(t){this.$emit("input",t.target.checked)}},computed:{classObject:function(){var t,n=this.color,e=this.value,i=this.theme,s=this.typeBold,o=this.disabled;return t={"vue-switcher":!0},I()(t,"vue-switcher--unchecked",!e),I()(t,"vue-switcher--disabled",o),I()(t,"vue-switcher--bold",s),I()(t,"vue-switcher--bold--unchecked",s&&!e),I()(t,"vue-switcher-theme--"+i,n),I()(t,"vue-switcher-color--"+n,n),t},shouldShowLabel:function(){return""!==this.label||""!==this.textEnabled||""!==this.textDisabled}}},E={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("label",{class:t.classObject},[t.shouldShowLabel?e("span",{staticClass:"vue-switcher__label"},[t.label?e("span",{domProps:{textContent:t._s(t.label)}}):t._e(),t._v(" "),!t.label&&t.value?e("span",{domProps:{textContent:t._s(t.textEnabled)}}):t._e(),t._v(" "),t.label||t.value?t._e():e("span",{domProps:{textContent:t._s(t.textDisabled)}})]):t._e(),t._v(" "),e("input",{attrs:{type:"checkbox",disabled:t.disabled},domProps:{checked:t.value},on:{change:t.trigger}}),t._v(" "),e("div")])},staticRenderFns:[]};var L=e("VU/8")($,E,!1,function(t){e("fYSq")},null,null).exports,R=e("M4fF"),B=e.n(R),T={methods:{unescapeSymbols:function(t){var n="",e=!1;if(t.indexOf("$")>-1)for(var i=0;i<t.length;i++)e?(n+='<span class="symbols-font">'+this.htmlEntities(t[i])+"</span>",e=!1):"$"===t[i]?e=!0:n+=t[i];else n=t;return n}}},D={data:function(){return{progressBar:{progress:100,intervalTime:25,intervalID:null},status:{},instruction:{text:"",time:10},introOutroSounds:{intervalID:null,iteration:1},outroAnimation:!1,nullCellAnimation:!1,gridScaleX:1,oldMouseEvent:null,lastEnterPress:0}},props:{grid:{required:!0},levelCompleted:{required:!1,default:!1}},beforeMount:function(){var t=this;this.grid.forEach(function(n){["switch","buttons_slider","slider","circular_slider"].indexOf(n.status)>-1&&(t.status[n.name]=0)})},mounted:function(){var t=this;this.updateProgressBar(),this.intervalID=setInterval(this.updateProgressBar,this.progressBar.intervalTime),this.$bus.$on("#command",function(n){n.hasOwnProperty("expired")&&null!==n.expired&&(n.expired?t.playSound("sounds/error.mp3"):t.playSound("sounds/ok.mp3")),t.instruction.text=n.text,t.instruction.time=n.time,t.progressBar.progress=100}),this.$bus.$on("#safe",function(){t.$emit("safe")}),this.$bus.$on("#flip_grid",function(){t.gridScaleX*=-1,t.playSound("sounds/wobble.mp3"),setTimeout(function(){t.$nextTick(function(){t.refreshSliders()})},550)}),window.addEventListener("keyup",this.onKeyUp),setTimeout(function(){t.$nextTick(function(){t.refreshSliders()})},1e3*(.1*this.grid.length+.2)),this.playIntroOutroSounds()},destroyed:function(){this.$bus.$off("#command"),this.$bus.$off("#flip_grid"),this.$bus.$off("#safe"),window.removeEventListener("keyup",this.onKeyUp),null!==this.progressBar.intervalID&&clearInterval(this.progressBar.intervalID),null!==this.introOutroSounds.intervalID&&clearInterval(this.introOutroSounds.intervalID)},methods:{onKeyUp:function(t){13===t.keyCode&&this.blackHole()},updateProgressBar:function(){if(this.progressBar.progress-=100*this.progressBar.intervalTime/(1e3*this.instruction.time),this.progressBar.progress<0&&(this.progressBar.progress=0),void 0!==this.$refs.progress){var t=this.progressBar.progress,n="";n=t<=5?"#f63a0f":t>5&&t<=25?"#f27011":t>25&&t<=50?"#f2b01e":t>50&&t<=75?"#f2d31b":"#86e01e",this.$refs.progress.style.width=t+"%",this.$refs.progress.style.backgroundColor=n}},gridColumn:function(t){var n=t.x+1;return t.w>0&&(n+="/"+(t.x+1+t.w)),n},gridRow:function(t){var n=t.y+1;return t.h>0&&(n+="/"+(t.y+1+t.h)),n},sendCommand:function(t,n){var e={name:t.name};void 0!==n&&(e.value=n),this.$io.emit("command",e)},setButtonsSlider:function(t,n){this.$set(this.status,t.name,n)},playIntroOutroSounds:function(t){var n=this,e=void 0===t||t?"wosh":"wosh-out";this.playSound("sounds/"+e+".mp3"),this.introOutroSounds.intervalID=setInterval(function(){n.playSound("sounds/"+e+".mp3"),n.introOutroSounds.iteration++,n.introOutroSounds.iteration===n.grid.length&&(n.introOutroSounds.iteration=0,clearInterval(n.introOutroSounds.intervalID))},100)},refreshSliders:function(){void 0!==this.$refs.sliders?this.$refs.sliders.forEach(function(t){t.refresh()}):console.warn("$refs.slider is undefined")},asteroid:function(t){t.time=Date.now();var n=this.calculateMouseVelocity(t,this.oldMouseEvent);this.oldMouseEvent=t,n>=10&&this.sendAsteroidDefeatThrottled()},blackHole:function(){var t=Date.now();t-this.lastEnterPress<250&&this.sendBlackHoleDefeatThrottled(),this.lastEnterPress=t},calculateMouseVelocity:function(t,n){var e,i,s,o,a=t.clientX,r=t.clientY;return null===n?0:(o=n.time,e=n.clientX-a,i=n.clientY-r,s=Date.now()-o,Math.sqrt(e*e+i*i)/s)},sendBlackHoleDefeatThrottled:B.a.throttle(function(){console.log("black hole!"),console.log(this),this.$io.emit("defeat_black_hole")},1500),sendAsteroidDefeatThrottled:B.a.throttle(function(){console.log("asteroid!"),this.$io.emit("defeat_asteroid")},1500),sendCommandDebounced:B.a.debounce(function(t,n){var e=this.status[t.name];"function"==typeof n&&(e=n(e)),this.sendCommand(t,e)},300),sliderDrag:function(t){this.playSound("sounds/tick.mp3"),this.sendCommandDebounced(t)},circularSliderDrag:function(t){this.playSound("sounds/tick2_"+Math.floor(3*Math.random())+".mp3"),this.sendCommandDebounced(t,function(t){return Math.floor(t/10)})}},watch:{levelCompleted:function(){var t=this;this.nullCellAnimation=!0,this.outroAnimation=!0,this.$nextTick(function(){t.nullCellAnimation=!1,t.playIntroOutroSounds(!0),t.playSound("sounds/transition"+(Math.floor(3*Math.random())+1)+".mp3"),setTimeout(function(){t.$emit("outroAnimationDone")},4500)})}},computed:{flipScale:function(){return{transform:"scaleX("+this.gridScaleX+")"}}},components:{vueSlider:k.a,Switches:L},mixins:[T]},G={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"game-bottom-container"},on:{mousemove:function(n){return t.asteroid(n)}}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.outroAnimation,expression:"outroAnimation"}],staticClass:"fader",staticStyle:{"animation-duration":"1.5s"}}),t._v(" "),e("div",{staticClass:"space-font-mono",attrs:{id:"instruction"},domProps:{innerHTML:t._s(t.unescapeSymbols(t.instruction.text))}}),t._v(" "),t.outroAnimation?t._e():e("div",{staticClass:"progress"},[e("div",{ref:"progress",staticClass:"progress-bar"})]),t._v(" "),null!==t.grid?e("div",{style:t.flipScale,attrs:{id:"grid"}},t._l(t.grid,function(n,i){return t.nullCellAnimation?t._e():e("div",{staticClass:"cell",style:{"grid-row":t.gridRow(n),"grid-column":t.gridColumn(n),"animation-delay":.1*i+"s",transform:"scale("+(t.outroAnimation?"1":"0")+")",animation:"0.2s ease-out "+.1*i+"s 1 "+(t.outroAnimation?"reverse":"normal")+" forwards running cell-intro"}},[e("span",{staticClass:"command-name",class:{"symbols-font":n.hasOwnProperty("symbol"),"alien-font":n.hasOwnProperty("alien")}},[t._v(t._s(n.name))]),t._v(" "),"button"===n.type?e("push-button",{staticClass:"red",attrs:{empty:"",downSound:"sounds/button2_down.mp3",upSound:"sounds/button2_up.mp3"},on:{click:function(e){return t.sendCommand(n)}}}):"switch"===n.type?e("switches",{attrs:{"type-bold":!0,"emit-on-mount":!1,color:"normal",theme:"custom"},on:{input:function(e){t.playSound("sounds/switch_"+(t.status[n.name]?"on":"off")+".mp3"),t.sendCommand(n,t.status[n.name])}},model:{value:t.status[n.name],callback:function(e){t.$set(t.status,n.name,e)},expression:"status[command.name]"}}):"actions"===n.type?e("div",t._l(n.actions,function(i){return e("push-button",{staticClass:"red",attrs:{narrow:"",downSound:"sounds/button3_down.mp3",upSound:"sounds/button3_up.mp3",grid:!0},on:{click:function(e){return t.sendCommand(n,i)}}},[t._v(t._s(i))])}),1):"slider"===n.type?e("vue-slider",{ref:"sliders",refInFor:!0,staticClass:"slider",style:t.flipScale,attrs:{width:n.w>n.h?280:12,height:n.w>n.h?12:200,direction:n.w>n.h?"horizontal":"vertical",min:n.min,max:n.max,dotSize:20,speed:.3,tooltip:"never",piecewise:!0,piecewiseLabel:!0,labelActiveStyle:{color:"#02bd7d"},labelStyle:{color:"#34485f"},bgStyle:{backgroundColor:"#34485f"},processStyle:{backgroundColor:"#02bd7d"}},on:{"drag-end":function(e){return t.sliderDrag(n)},callback:function(e){return t.sliderDrag(n)}},model:{value:t.status[n.name],callback:function(e){t.$set(t.status,n.name,e)},expression:"status[command.name]"}}):"circular_slider"===n.type?e("circle-slider",{staticClass:"circular-slider",style:t.flipScale,attrs:{"circle-width":20,"progress-width":10,"knob-radius":8,min:n.min,max:10*n.max,side:150},on:{input:function(e){return t.circularSliderDrag(n)}},model:{value:t.status[n.name],callback:function(e){t.$set(t.status,n.name,e)},expression:"status[command.name]"}}):"buttons_slider"===n.type?e("div",{staticStyle:{display:"flex"}},t._l(n.max+1,function(i){return e("push-button",{class:{green:t.status[n.name]===i,red:t.status[n.name]!==i},attrs:{narrow:"",downSound:"sounds/button2_down.mp3",upSound:"sounds/button2_up.mp3",grid:!0},on:{click:function(e){t.setButtonsSlider(n,i),t.sendCommand(n,i-1)}}},[t._v("\n            "+t._s(i-1)+"\n          ")])}),1):t._e(),t._v(" "),"circular_slider"===n.type?e("div",{staticClass:"circular-slider-label"},[t._v("\n        "+t._s(Math.floor(t.status[n.name]/10))+"\n      ")]):t._e()],1)}),0):t._e()])},staticRenderFns:[]};var O=e("VU/8")(D,G,!1,function(t){e("psgu")},null,null).exports,M={props:{text:{required:!0,type:String},alert:{required:!1,type:Boolean,default:!1}},mounted:function(){var t=this;setTimeout(function(){t.alert?t.playSound("sounds/modifier.mp3"):t.playSound("sounds/no_modifier.mp3")},1e3)},mixins:[T]},U={render:function(){var t=this.$createElement,n=this._self._c||t;return n("div",{attrs:{id:"level-intro"}},[this.alert?n("icon",{staticClass:"icon alert",attrs:{name:"exclamation-triangle",scale:"4"}}):n("icon",{staticClass:"icon success",attrs:{name:"check-circle",scale:"4"}}),this._v(" "),n("div",{staticClass:"text space-font-mono",domProps:{innerHTML:this._s(this.unescapeSymbols(this.text))}})],1)},staticRenderFns:[]};var F=e("VU/8")(M,U,!1,function(t){e("O/9a")},null,null).exports,P={methods:{mouseDown:function(){this.disabled||this.playSound(this.downSound)},mouseUp:function(){this.disabled||this.playSound(this.upSound)},click:function(){this.disabled||this.$emit("click")}},props:{big:{type:Boolean,required:!1,default:!1},small:{type:Boolean,required:!1,default:!1},bold:{type:Boolean,required:!1,default:!1},disabled:{type:Boolean,required:!1,default:!1},fitted:{type:Boolean,required:!1,default:!1},narrow:{type:Boolean,required:!1,default:!1},inline:{type:Boolean,required:!1,default:!1},grid:{type:Boolean,required:!1,default:!1},empty:{type:Boolean,required:!1,default:!1},downSound:{type:String,required:!1,default:"sounds/button_down.mp3"},upSound:{type:String,required:!1,default:"sounds/button_up.mp3"}},computed:{enabled:function(){return!this.disabled}}},j={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"btn-push",class:{big:t.big,small:t.small,disabled:t.disabled,enabled:t.enabled,fitted:t.fitted,inline:t.inline,empty:t.empty,narrow:t.narrow},on:{mousedown:function(n){return t.mouseDown()},mouseup:function(n){return t.mouseUp()},click:function(n){return t.click()}}},[e("span",{class:{big:t.big,small:t.small,bold:t.bold,grid:t.grid}},[t._t("default")],2)])},staticRenderFns:[]};var V=e("VU/8")(P,j,!1,function(t){e("nOGk")},null,null).exports,Y={data:function(){return{gameGrid:null,status:0,healthInfo:{health:50,deathLimit:0},showShip:!0,showAlarm:!1,showSafe:!1,levelInfo:{level:1,modifier:null,modifierText:""}}},components:{Ship:m,WelcomeText:S,GameField:O,DeathBarrier:f,LevelIntro:F,PushButton:V},mounted:function(){var t=this;this.$bus.$on("#grid",function(n){console.log("all intro done ack received"),t.status=2,t.gameGrid=n}),this.$bus.$on("#health_info",function(n){t.$set(t.healthInfo,"health",n.health),t.$set(t.healthInfo,"deathLimit",n.death_limit),t.healthInfo.health<=t.healthInfo.deathLimit+7?(t.showAlarm=!0,t.playSound("sounds/alarm.mp3",!0)):t.showAlarm&&(t.showAlarm=!1,t.stopSound("sounds/alarm.mp3",1500))}),this.$bus.$on("#next_level",function(n){t.status=3,t.levelInfo.level=n.level+1,n.hasOwnProperty("modifier")?t.levelInfo.modifier=n.modifier:t.levelInfo.modifier=null,t.levelInfo.modifierText=n.text,t.healthInfo.health=50,t.healthInfo.deathLimit=0,setTimeout(function(){t.showShip=!1,t.$nextTick(function(){t.showShip=!0})},4499)}),this.$bus.$on("#disconnect",this.haltGameDisconnect),this.$bus.$on("#player_disconnected",this.haltGameDisconnect),this.$bus.$on("#game_over",function(){t.status=6,t.stopSound("sounds/alarm.mp3"),t.playSound("sounds/gameover.mp3")})},destroyed:function(){this.$bus.$off("#grid"),this.$bus.$off("#health_info"),this.$bus.$off("#next_level"),this.$bus.$off("#game_over")},methods:{introDone:function(){this.status=1,this.$io.emit("intro_done")},outroAnimationDone:function(){var t=this;this.status=4,setTimeout(function(){t.introDone()},5e3)},goToMenu:function(){window.location.replace("/")},haltGameDisconnect:function(){this.status=5,this.playSound("sounds/disconnected.mp3")},safe:function(){this.showSafe=!0,this.playSound("sounds/safe.mp3")}},computed:{shipLeft:function(){return 2===this.status?this.healthInfo.health-15+"%":3===this.status?"150%":"0"},deathBarrierPosition:function(){return 2===this.status?this.healthInfo.deathLimit:"-50%"},inGame:function(){return 2===this.status},levelTransition:function(){return 4===this.status},waitingPlayers:function(){return 1===this.status},printingWelcome:function(){return 0===this.status},outroAnimation:function(){return 3===this.status},disconnected:function(){return 5===this.status},gameOver:function(){return 6===this.status}}},N={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"space-font",attrs:{id:"intro"}},[e("div",{staticClass:"top",class:{large:!t.inGame,small:t.inGame,dark:t.disconnected||t.gameOver}},[e("death-barrier",{attrs:{position:t.deathBarrierPosition}}),t._v(" "),t.showShip?e("ship",{attrs:{left:t.shipLeft,transitionSpeed:t.outroAnimation?4:t.levelTransition?0:1}}):t._e(),t._v(" "),e("transition",{attrs:{name:"v-fade"}},[t.printingWelcome||t.levelTransition?e("span",{staticClass:"outline"},[t._v("Settore "+t._s(t.levelInfo.level))]):t._e()]),t._v(" "),e("transition",{attrs:{name:"v-fade"}},[t.outroAnimation?e("span",{staticClass:"outline"},[t._v("Iperspazio!")]):t._e()])],1),t._v(" "),t.printingWelcome?e("div",{staticClass:"bottom"},[e("welcome-text",{on:{completed:function(n){return t.introDone()}}}),t._v(" "),e("icon",{staticClass:"fast-forward",attrs:{name:"forward",scale:"2"},nativeOn:{click:function(n){return t.introDone()}}})],1):t.waitingPlayers?e("div",{staticClass:"bottom centered"},[e("div",[e("icon",{staticClass:"icon",attrs:{name:"circle-o-notch",scale:"3",spin:""}})],1),t._v(" "),t._m(0)]):t.inGame||t.outroAnimation?e("div",{staticClass:"bottom"},[e("transition",{attrs:{name:"v-fade"}},[t.showAlarm?e("div",{attrs:{id:"alarm-light"}}):t._e()]),t._v(" "),e("transition",{attrs:{name:"v-fade-half"},on:{"after-enter":function(n){t.showSafe=!1}}},[t.showSafe?e("div",{attrs:{id:"safe"}},[e("div",[e("icon",{staticClass:"icon",attrs:{name:"fire-extinguisher",scale:"5"}})],1),t._v(" "),e("div",[t._v("Al sicuro!")])]):t._e()]),t._v(" "),e("transition",{attrs:{name:"v-fade"}},[e("game-field",{attrs:{grid:t.gameGrid,levelCompleted:!t.inGame},on:{outroAnimationDone:function(n){return t.outroAnimationDone()},safe:function(n){return t.safe()}}})],1)],1):t.levelTransition?e("div",{staticClass:"bottom"},[e("level-intro",{attrs:{text:t.levelInfo.modifierText,alert:t.levelInfo.modifier}})],1):t.disconnected?e("div",{staticClass:"bottom centered"},[e("div",[e("icon",{staticClass:"icon",attrs:{name:"unlink",scale:"3"}})],1),t._v(" "),t._m(1),t._v(" "),e("div",{staticClass:"back-button"},[e("push-button",{staticClass:"orange space-font-mono",attrs:{narrow:""},on:{click:function(n){return t.goToMenu()}}},[e("span",[e("icon",{attrs:{name:"fire-extinguisher"}})],1),t._v("\n        Torna al menu\n      ")])],1)]):t.gameOver?e("div",{staticClass:"bottom centered"},[e("div",[e("icon",{staticClass:"icon",attrs:{name:"bomb",scale:"3"}})],1),t._v(" "),t._m(2),t._v(" "),e("div",{staticClass:"back-button"},[e("push-button",{staticClass:"orange space-font-mono",attrs:{narrow:""},on:{click:function(n){return t.goToMenu()}}},[e("span",[e("icon",{attrs:{name:"frown-o"}})],1),t._v("\n        Esci\n      ")])],1)]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,n=this._self._c||t;return n("div",{staticClass:"space-font-mono"},[n("span",[this._v("In attesa degli altri giocatori...")])])},function(){var t=this.$createElement,n=this._self._c||t;return n("div",{staticClass:"space-font-mono"},[n("span",[this._v("Connessione persa")])])},function(){var t=this.$createElement,n=this._self._c||t;return n("div",{staticClass:"space-font-mono"},[n("span",[this._v("Game over")])])}]};var z=e("VU/8")(Y,N,!1,function(t){e("neY7")},null,null).exports,Q={data:function(){return{playingMusic:this.isBgmPlaying(),version:"1.1"}},mounted:function(){this.$store.getters.menuMusicInitialized||this.$store.commit("menuMusicInitialized")},methods:{toggleMusic:function(){this.isBgmPlaying()?this.stopBgm():this.playBgm("static/music/menu.mp3"),this.playingMusic=this.isBgmPlaying()},joinLobby:function(){this.$router.push("/join")}},computed:{connecting:function(){return this.$store.getters.isConnecting},connected:function(){return this.$store.getters.isConnected}}},H={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"full-size both-centered",attrs:{id:"start"}},[e("div",{staticClass:"fluid"},[e("div",{staticClass:"space-font pacchiano",attrs:{id:"title"}},[t._v("\n      Open Spaceteam\n    ")]),t._v(" "),e("div",{staticClass:"actions separated-container"},[e("div",{staticClass:"space-font-mono",attrs:{id:"subtitle"}},[t._v("\n        Simulatore collaborativo di disastri spaziali\n      ")]),t._v(" "),e("push-button",{staticClass:"space-font-mono",attrs:{big:"",disabled:!t.connected},on:{click:function(n){return t.$router.push("/host")}}},[t._v("Ospita")]),t._v(" "),e("push-button",{staticClass:"space-font-mono",attrs:{big:"",disabled:!t.connected},on:{click:function(n){return t.joinLobby()}}},[t._v("Unisciti")])],1)]),t._v(" "),e("icon",{staticClass:"mute-icon",attrs:{name:t.playingMusic?"volume-down":"volume-off",scale:"3"},nativeOn:{click:function(n){return t.toggleMusic()}}}),t._v(" "),e("div",{staticClass:"space-font-mono",attrs:{id:"footer"}},[e("span",[t._v("v"+t._s(t.version)+" ~ ")]),t._v(" "),e("span",[t._v("Realizzato da Giuseppe Guerra per l'ISIS Di Maggio ~ ")]),t._v(" "),e("span",[t._v("Stato server:")]),t._v(" "),t.connecting?e("icon",{staticClass:"connecting",attrs:{name:"spinner",pulse:""}}):t.connected&&!t.connecting?e("icon",{staticClass:"online",attrs:{name:"check-circle"}}):t.connected||t.connecting?t._e():e("icon",{staticClass:"offline",attrs:{name:"unlink"}})],1)],1)},staticRenderFns:[]};var q=e("VU/8")(Q,H,!1,function(t){e("EGRX")},null,null).exports,W={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"menu-pane",attrs:{id:"host"}},[e("div",[e("h1",{staticClass:"space-font pacchiano"},[t._v("Ospita partita")]),t._v(" "),t.loading?e("div",[e("div",[e("icon",{attrs:{name:"circle-o-notch",spin:"",scale:"3"}})],1),t._v("\n      Creazione partita...\n    ")]):e("div",{staticClass:"separated-container",attrs:{id:"host-form"}},[t._v("\n      Nome partita:\n      "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"input-field fluid separated",class:{"error shake-animation":t.error},domProps:{value:t.name},on:{input:function(n){n.target.composing||(t.name=n.target.value)}}}),t._v(" "),e("push-button",{class:{green:t.pub,orange:!t.pub},on:{click:function(n){return t.changeGameType()}}},[e("span",[e("icon",{attrs:{name:t.gameTypeIcon}})],1),t._v("\n        Tipo partita: "+t._s(t.gameTypeReadable)+"\n      ")]),t._v(" "),e("push-button",{attrs:{bold:""},on:{click:function(n){return t.submit()}}},[e("span",[e("icon",{attrs:{name:"gamepad"}})],1),t._v(" "),e("span",[t._v("Crea partita")])]),t._v(" "),e("push-button",{on:{click:function(n){return t.$router.push("/")}}},[e("span",[e("icon",{attrs:{name:"chevron-left"}})],1),t._v(" "),e("span",[t._v("Indietro")])])],1)])])},staticRenderFns:[]};var J=e("VU/8")({data:function(){return{loading:!1,name:"",pub:!0,error:!1}},methods:{submit:function(){0===this.name.length?this.error=!0:(this.error=!1,this.loading=!0,this.$io.emit("create_game",{name:this.name,public:this.pub}))},changeGameType:function(){this.pub=!this.pub}},computed:{gameTypeIcon:function(){return this.pub?"unlock":"lock"},gameTypeReadable:function(){return this.pub?"Pubblica":"Privata"}}},W,!1,function(t){e("XlUU")},null,null).exports,K={data:function(){return{games:{},loading:!1,joining:!1}},methods:{joinGame:function(t){this.$io.emit("join_game",{game_id:t})},joinLobby:function(){this.$io.emit("join_lobby")}},mounted:function(){var t=this;this.$bus.$on("#game_join_fail",function(n){t.playSound("sounds/error.mp3"),console.error(n.message)}),this.$bus.$on("#lobby_info",function(n){t.$set(t.games,n.game_id,n)}),this.$bus.$on("#lobby_disposed",function(n){t.$delete(t.games,n.game_id)}),this.$bus.$on("#connect",function(){t.joinLobby()}),this.$store.getters.isConnected&&this.joinLobby()},destroyed:function(){this.$bus.$off("#lobby_info"),this.$bus.$off("#lobby_disposed"),this.$io.emit("leave_lobby")}},X={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"menu-pane",attrs:{id:"join"}},[e("div",[e("h1",{staticClass:"space-font pacchiano"},[t._v("Partite disponibili")]),t._v(" "),t.loading||t.joining?e("div",[e("div",[e("icon",{attrs:{name:"circle-o-notch",spin:"",scale:"3"}})],1),t._v(" "),t.joining?e("div",[t._v("Accesso alla partita...")]):e("div",[t._v("Caricamento partite...")])]):e("div",{staticClass:"separated-container"},[e("div",{staticClass:"games"},t._l(t.games,function(n,i){return e("push-button",{key:n.game_id,class:{green:n.players<n.max_players},attrs:{disabled:n.players==n.max_players},on:{click:function(n){return t.joinGame(i)}}},[e("span",[n.players<n.max_players?e("icon",{attrs:{name:"rocket"}}):e("icon",{attrs:{name:"lock"}})],1),t._v("\n          "+t._s(n.name)+" ("+t._s(n.players)+"/"+t._s(n.max_players)+")\n        ")])}),1),t._v(" "),e("push-button",{staticClass:"orange",on:{click:function(n){return t.$router.push("/join/private")}}},[e("span",[e("icon",{attrs:{name:"lock"}})],1),t._v("\n        Accedi a una partita privata\n      ")]),t._v(" "),e("push-button",{attrs:{bold:""},on:{click:function(n){return t.$router.push("/")}}},[e("span",[e("icon",{attrs:{name:"chevron-left"}})],1),t._v("\n        Indietro\n      ")])],1)])])},staticRenderFns:[]};var Z=e("VU/8")(K,X,!1,function(t){e("BcG2")},null,null).exports,tt={data:function(){return{code:"",loading:!1,error:!1,d:!1}},methods:{join:function(){var t=this;0===this.code.length?this.error=!0:(this.loading=!0,setTimeout(function(){t.d=!0,t.playSound("sounds/unlock.mp3")},1242))}}},nt={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"menu-pane",attrs:{id:"join-private"}},[e("div",[e("h1",{staticClass:"space-font pacchiano"},[t._v("Partita privata")]),t._v(" "),t.loading?e("div",{attrs:{id:"join-private-loading"}},[e("div",[e("icon",{class:{done:t.d},attrs:{name:"key",pulse:!t.d,scale:"3"}}),t._v(" "),e("icon",{staticClass:"rotated",attrs:{name:t.d?"unlock-alt":"lock",scale:"3"}})],1),t._v("\n      Accesso alla partita...\n    ")]):e("div",{staticClass:"separated-container"},[t._v("\n      Codice invito:\n      "),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],staticClass:"input-field fluid",class:{"error shake-animation":t.error},attrs:{type:"password"},domProps:{value:t.code},on:{input:function(n){n.target.composing||(t.code=n.target.value)}}})]),t._v(" "),e("push-button",{staticClass:"orange",on:{click:function(n){return t.join()}}},[e("span",[e("icon",{attrs:{name:"sign-in"}})],1),t._v("\n        Accedi\n      ")]),t._v(" "),e("push-button",{attrs:{bold:""},on:{click:function(n){return t.$router.push("/join")}}},[e("span",[e("icon",{attrs:{name:"chevron-left"}})],1),t._v("\n        Indietro\n      ")])],1)])])},staticRenderFns:[]};var et=e("VU/8")(tt,nt,!1,function(t){e("0F4k")},null,null).exports,it={data:function(){return{slots:[],settings:{size:4,public:!0},inIntro:!1}},mounted:function(){var t=this;this.$bus.$on("#game_info",function(n){var e=0;t.slots.forEach(function(t){null!==t&&t.ready&&e++}),t.slots=n.slots,t.settings.size=n.max_players,t.settings.public=n.public;var i=0,s=!0;t.slots.forEach(function(t){null!==t&&(t.ready?i++:s=!1)}),i>=2&&s&&i!==e&&t.playSound("sounds/all_ready.mp3")}),this.$bus.$on("#game_started",function(n){t.inIntro=!0,t.stopBgm(),t.playSound("sounds/game_start.mp3"),setTimeout(function(){t.$router.push("/game")},2200)})},methods:{isOccupied:function(t){return null!==t},isHost:function(t){return null!==t&&t.host},changeLobbySize:function(t){if(!this.inIntro){var n=this.settings.size;if(t>0&&this.settings.size<4)n++;else{if(!(t<0&&this.settings.size>2))return;n--}this.$io.emit("change_game_settings",{size:n})}},changeGameType:function(){this.inIntro||this.$io.emit("change_game_settings",{public:!this.settings.public})},toggleReady:function(){this.inIntro||this.$io.emit("ready")},gameCanStart:function(){var t=!0,n=0;return this.slots.forEach(function(e){null!==e&&(n++,e.ready||(t=!1))}),t&&n>=2},imReady:function(){var t=this.mySlot();return null!==t&&t.ready},imHost:function(){var t=this.mySlot();return null!==t&&t.host},mySlot:function(){var t=this,n=null;return this.slots.forEach(function(e){null!==e&&e.uid===t.$store.getters.uid&&(n=e)}),n},startGame:function(){this.inIntro||this.$io.emit("start_game")},leaveGame:function(){this.inIntro||(this.$io.emit("leave_game"),this.$router.push("/"))}},computed:{gameTypeIcon:function(){return this.settings.public?"unlock":"lock"},gameTypeReadable:function(){return this.settings.public?"Pubblica":"Privata"},settingsColourClass:function(){return this.settings.public?"green":"orange"},readyIcon:function(){return this.imReady()?"times":"check"},readyText:function(){return this.imReady()?"Non sono ancora pronto":"Sono pronto!"},lobbyLink:function(){return window.location.href}}},st={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"lobby-page-container"}},[t.inIntro?e("div",{staticClass:"fader"}):t._e(),t._v(" "),e("div",{staticClass:"menu-pane separated-container",attrs:{id:"lobby"}},[e("div",[e("h1",{staticClass:"space-font pacchiano"},[t._v("Lobby")]),t._v(" "),e("div",t._l(t.slots,function(n,i){return e("div",{staticClass:"separated-container slot",class:{green:null!==n&&n.ready}},[e("div",{class:{empty:!t.isOccupied(n),host:t.isHost(n),player:!t.isHost(n)}},[e("div",{staticClass:"name"},[e("span",[t.isOccupied(n)?e("icon",{attrs:{name:n.host?"bolt":"gamepad"}}):e("icon",{attrs:{name:"spinner",pulse:""}})],1),t._v(" "),t.isOccupied(n)?e("span",[t._v("\n                Giocatore "+t._s(i+1)+"\n              ")]):e("span",[t._v("\n                In attesa...\n              ")]),t._v(" "),e("span",[null!==n?e("icon",{attrs:{name:n.ready?"check-circle":"times-circle"}}):t._e()],1)])])])}),0),t._v(" "),t.imHost()?e("div",{staticClass:"lobby-button-container",attrs:{id:"players-number"}},[e("push-button",{class:t.settingsColourClass,staticStyle:{float:"left"},attrs:{fitted:"",inline:"",disabled:this.settings.size<=2},on:{click:function(n){return t.changeLobbySize(-1)}}},[e("span",[e("icon",{attrs:{name:"chevron-left"}})],1)]),t._v(" "),e("span",{class:t.settingsColourClass},[t._v("Numero giocatori: "+t._s(t.settings.size))]),t._v(" "),e("push-button",{class:t.settingsColourClass,staticStyle:{float:"right"},attrs:{fitted:"",inline:"",disabled:this.settings.size>=4},on:{click:function(n){return t.changeLobbySize(1)}}},[e("span",[e("icon",{attrs:{name:"chevron-right"}})],1)])],1):t._e(),t._v(" "),t.imHost()?e("div",{staticClass:"lobby-button-container"},[e("push-button",{class:{green:t.settings.public,orange:!t.settings.public},on:{click:function(n){return t.changeGameType()}}},[e("span",[e("icon",{attrs:{name:t.gameTypeIcon}})],1),t._v("\n          Tipo partita: "+t._s(t.gameTypeReadable)+"\n        ")])],1):t._e(),t._v(" "),t.settings.public?t._e():e("div",{staticClass:"lobby-button-container"},[t._v("\n        Condividi questo link con gli altri giocatori per invitarli in questa partita\n        "),e("input",{staticClass:"input-field fluid",attrs:{type:"text",readonly:""},domProps:{value:t.lobbyLink},on:{focus:function(t){return t.target.select()}}})]),t._v(" "),e("div",{staticClass:"lobby-button-container"},[t.gameCanStart()&&t.imHost()?t.imHost()&&t.gameCanStart()?e("push-button",{staticClass:"blue bold",on:{click:function(n){return t.startGame()}}},[e("icon",{attrs:{name:"play"}}),t._v("\n          Inizia partita!\n        ")],1):t._e():e("push-button",{class:{green:!t.imReady(),orange:t.imReady()},on:{click:function(n){return t.toggleReady()}}},[e("icon",{attrs:{name:t.readyIcon}}),t._v("\n          "+t._s(t.readyText)+"\n        ")],1)],1),t._v(" "),e("div",{staticClass:"lobby-button-container",attrs:{id:"exit"}},[e("push-button",{on:{click:function(n){return t.leaveGame()}}},[e("icon",{attrs:{name:"sign-out"}}),t._v("\n          Esci\n        ")],1)],1)])])])},staticRenderFns:[]};var ot=e("VU/8")(it,st,!1,function(t){e("T8Aa")},null,null).exports;o.a.use(c.a);var at=new c.a({mode:"history",routes:[{path:"/",name:"Start",component:q},{path:"/host",name:"Host",component:J},{path:"/join",name:"Join",component:Z},{path:"/join/private",name:"JoinPrivate",component:et},{path:"/game",name:"Game",component:z,meta:{game:!0}},{path:"/lobby/:gameID",name:"Lobby",component:ot,meta:{game:!0}}]});at.beforeEach(function(t,n,e){t.matched.some(function(t){return t.meta.game})&&!d.getters.inGame?e("/"):e()});var rt=at,lt={render:function(){var t=this.$createElement,n=this._self._c||t;return n("div",{staticClass:"space-font-mono",attrs:{id:"loading"}},[n("div",[n("icon",{attrs:{name:"cog",spin:"",scale:"3"}})],1),this._v("\n  Downloading data\n")])},staticRenderFns:[]};var ct={data:function(){return{loading:!1}},components:{Loading:e("VU/8")({},lt,!1,function(t){e("CbWX")},null,null).exports}},ut={render:function(){var t=this.$createElement,n=this._self._c||t;return n("div",{attrs:{id:"main"}},[this.loading?n("loading"):n("div",{attrs:{id:"router-view"}},[n("transition",{attrs:{name:"change-menu-page-backward"}},[n("router-view")],1)],1)],1)},staticRenderFns:[]};var dt=e("VU/8")(ct,ut,!1,function(t){e("+NSl")},null,null).exports,ht=e("D4uH"),mt=new o.a,pt=null,ft={},vt={methods:{playBgm:function(t){null===pt&&((pt=new Audio(t)).addEventListener("ended",function(){this.currentTime=0,this.play()},!1),pt.play())},stopBgm:function(){null!==pt&&(pt.currentTime=0,pt.pause(),pt=null)},isBgmPlaying:function(){return null!==pt&&!pt.paused},playSound:function(t,n){var e=void 0!==n&&n;if(!e||!ft.hasOwnProperty(t.toLowerCase())){var i=new Audio("/static/"+t);e&&i.addEventListener("ended",function(){this.currentTime=0,this.play()},!1),i.play(),e&&(ft[t.toLowerCase()]=i)}},stopSound:function(t,n){var e=this;if(ft.hasOwnProperty(t.toLowerCase())){var i=ft[t.toLowerCase()];if(void 0!==n)var s=i.volume/n*100,o=setInterval(function(){i.volume-s<=0?(clearInterval(o),e.stopSound(t)):i.volume-=s},100);else i.currentTime=0,i.pause(),delete ft[t.toLowerCase()]}}}},gt={methods:{htmlEntities:function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}}},bt="http://localhost:4433",_t=e("8cxV");o.a.component("icon",ht.a),o.a.component("push-button",V),o.a.use(_t.default),o.a.prototype.$store=d,o.a.prototype.$bus=mt,o.a.mixin(vt),o.a.mixin(gt),o.a.config.productionTip=!1,new o.a({el:"#app",router:rt,template:"<App/>",components:{App:dt},mounted:function(){var t=this;o.a.prototype.$io=Object(a.a)(bt,{autoConnect:!0,transports:["websocket","xhr-polling","polling","htmlfile","flashsocket"],reconnection:!1,reconnectionDelay:1e3,reconnectionDelayMax:5e3,reconnectionAttempts:1/0}),l()(a.a.Manager)(this.$io),this.$io.on("welcome",function(n){console.log("Greeted by server with uid "+n.uid),t.$store.commit("connected",n.uid)}),this.$io.on("connect",function(){t.$bus.$emit("#connect"),t.$io.on("disconnect",function(){console.warn("disconnected"),t.$store.commit("connectionFailed"),t.$store.commit("inGame",!1),t.$bus.$emit("#disconnect")}),t.$io.on("game_join_success",function(n){t.playSound("sounds/lobby_join.mp3"),t.$store.commit("inGame",!0),t.$router.push("/lobby/"+n.game_id)}),t.$io.on("*",function(n){var e=s()(n.data,2),i=e[0],o=e[1];i.startsWith("error_")?(console.error("Got error from server ("+i+"). Data below."),console.log(o)):(console.log("Got arbitrary event #"+i+". Data below."),console.log(o),t.$bus.$emit("#"+i,o))}),t.$bus.$emit("#connected")})}})},"O/9a":function(t,n){},T8Aa:function(t,n){},"W+LL":function(t,n){},WsOO:function(t,n){},XlUU:function(t,n){},fYSq:function(t,n){},gxDI:function(t,n,e){"use strict";function i(t){if(t)return function(t){for(var n in i.prototype)t[n]=i.prototype[n];return t}(t)}n.a=i,i.prototype.on=i.prototype.addEventListener=function(t,n){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(n),this},i.prototype.once=function(t,n){function e(){this.off(t,e),n.apply(this,arguments)}return e.fn=n,this.on(t,e),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(t,n){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var e,i=this._callbacks["$"+t];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var s=0;s<i.length;s++)if((e=i[s])===n||e.fn===n){i.splice(s,1);break}return 0===i.length&&delete this._callbacks["$"+t],this},i.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var n=new Array(arguments.length-1),e=this._callbacks["$"+t],i=1;i<arguments.length;i++)n[i-1]=arguments[i];if(e){i=0;for(var s=(e=e.slice(0)).length;i<s;++i)e[i].apply(this,n)}return this},i.prototype.emitReserved=i.prototype.emit,i.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},i.prototype.hasListeners=function(t){return!!this.listeners(t).length}},jSVj:function(t,n){},jgeE:function(t,n){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAQCAYAAABk1z2tAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEFDiI4GMgaHwAAAHdJREFUSMftzrsNwmAMAOFL/jxYi7loYDz2oKYEKfhiikSwAkh247Pk4us8c2ImckQOBI1gRiaCERkIps8dDJgzwYp0SI+47ey+jZj93rF1vva/hrng2jCfaMMYcbnjY8DbFY8XBLLnx6eABSxgAQtYwAIW8L+Bb4njQiBefUssAAAAAElFTkSuQmCC"},nOGk:function(t,n){},neY7:function(t,n){},psgu:function(t,n){},z9Fp:function(t,n){}},["NHnr"]);
//# sourceMappingURL=app.5d4d011199ff682215dc.js.map